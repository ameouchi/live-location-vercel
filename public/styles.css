:root {
  --ui:#0b1a2b; --bg:#ffffff; --acc:#f3f5f8; --btn:#000; --btn2:#000; --danger:#e63946;
  --chip:#ffffff; --chip-border:#000;
}
*{ box-sizing:border-box; }
html,body{ height:100%;   font-family: 'Share Tech Mono', monospace, !important; }
body{
  margin:0; font-family: 'Share Tech Mono', monospace; color:var(--ui);
  background: var(--bg);
}

/* Map */
#map{ position:absolute; inset: 0 0 0 260px; filter: invert(0) hue-rotate(0deg); }

/* Sidebar (desktop) */
#sidebar{
  position:absolute; inset:0 auto 0 0; width:260px; background:var(--bg);
  border-right:1px solid #e6e9ef; padding:12px; overflow:auto; z-index:998;
  display:flex; flex-direction:column; gap:12px;
}

h1{ margin:1px 0 3px; font-size:1.5rem; }

h3{ margin:2px 0 6px; font-size:16px; }
.group{ background:#fff;  padding:12px; }
.row{ display:flex; gap:8px; }
.row>*{ flex:1; }

input[type="text"]{
  width:100%; padding:12px 12px; border:1px solid #000; border-radius:1px; font-size:14px;
}

button{
  padding:12px 14px; border-radius:1px; border:0px solid #000; background:#fff; cursor:pointer;
  font-weight:600; font-size:14px; line-height:1; touch-action:manipulation;
}
button:active{ transform: translateY(15px); }
.primary{ background:var(--btn); color:#fff; border-color: var(--btn); }
.alt     { background:var(--btn2); color:#fff; border-color: var(--btn2); }
.danger  { background:var(--danger); color:#fff; border-color: var(--danger); }
.ghost   { background:#fff; color:var(--ui); border:1px solid #000; }
.hint{ font-size:12px; color:#667; margin-top:6px; }

#peopleList{ list-style:none; padding:0; margin:6px 0 0; max-height:140px; overflow:auto; }
#peopleList li{ font-size:13px; padding:6px 2px; border-bottom:1px dashed #edf0f4; }

/* Floating map chips */
.chip {
  position:absolute; top:12px; left:12px; display:flex; gap:0px; z-index:999;
}
.chip button{
  background:var(--chip); border:1px solid var(--chip-border); border-radius:1px; padding:10px 12px; font-size:13px;
}

.fab-stack {
  position:absolute; right:12px; bottom: calc(12px + env(safe-area-inset-bottom)); z-index:999;
  display:flex; flex-direction:column; gap:10px;
}
.fab {
  border-radius:1px; padding:12px 16px; background:#fff; border:1px solid #000; font-size:13px;
  box-shadow: 0 8px 18px rgba(0,0,0,.08);
}

/* Underline literally everything */
*, *::before, *::after {
  text-decoration: underline !important;
  text-underline-offset: 0.02em;
  text-decoration-thickness: from-font;
font-family: 'Share Tech Mono', monospace !important;
}

/* Bottom sheet for mobile */
#sheet {
  display:none;
  position: fixed; left:0; right:0; bottom:0;
  background: var(--bg);
  border-top-left-radius:16px; border-top-right-radius:16px;
  box-shadow: 0 -10px 30px rgba(0,0,0,.08);
  z-index: 1000;
  max-height: 70vh;
  transform: translateY(0);
  transition: transform .25s ease;
  padding-bottom: calc(10px + env(safe-area-inset-bottom));
}
#sheetHeader{
  position:sticky; top:0; background:var(--bg); padding:8px 12px 6px; border-bottom:1px solid #eef2f6; border-top-left-radius:16px; border-top-right-radius:16px;
}
.drag{
  width:44px; height:5px; background:#d9dfe7; border-radius:1px; margin:6px auto 10px;
}
#sheetBody{ overflow:auto; display:flex; flex-direction:column; gap:12px; }

.controlRow{
  display:grid; grid-template-columns: 1fr 1fr; gap:0px;
}
.controlRow .ghost{ font-weight:600; }

/* Legend styles + dynamic bottom via CSS var */
#legend {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(var(--legend-bottom, 12px) + env(safe-area-inset-bottom));
  display: flex;
  gap: 18px;
  font-size: 10px;

  z-index: 1001; /* above map & sheet */
}
#legend .legend-item {
  display: flex; align-items: center; gap: 6px; width:95%;
}
#legend .legend-color {
  width: 16px; height: 16px; border: 0px solid #000; display: inline-block;   opacity: 50%;
}


/* Mobile layout */
@media (max-width: 820px){
  #map{ inset: 0; }
  #legend{ width:95%; }
  #sidebar{ display:none; }
  .chip{ top: 10px; left: 10px; right:auto;width:95%; }
  .fab-stack{ right:10px; }
  #sheet{ display:block; }
}
